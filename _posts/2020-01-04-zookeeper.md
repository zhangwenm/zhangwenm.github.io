---
layout: post
title: 虚拟机网卡原理
date: 2019-11-21
tags: [zookeeper,分布式,事务,paxos]
---

分布式理论
----

###### 虚拟机

分布式系统特点
 1分布性：机器在空间上随意分布
 2对等性：机器没有主从之分
 3并发性：同一个分布式系统中，多态机器可能会并发的操作一些共享的资源
 4缺乏全局时钟：很难界定两个事件的先后顺序，缺乏全局的时钟序列控制
 5故障总会发生：组成分布式系统的机器都有可能发生任何形式的故障
分布式系统问题
 1通信异常：网络延时
 2网络分区：脑裂，部分节点之间能够成功通信
 3三态：成功，失败，超时
 4节点故障
 
 事务：是指一系列对系统数据进行访问和更新操作组成的程序执行的逻辑单元
 四个特征：
 1原子性：全部成功执行，全部不执行
 2一致性：
 3隔离性：1未授权读取2授权读取3可重复读取4串行化
 4持久性
 
 为了平衡分布式系统可用性和一致性，出现了CAP和BASE等经典理论
 CAP理论：一个系统不可能同时满足一致性（CONSISTENCY）、可用性（availability）、
       分区容错性（partition tolerance）
       三个基本需求，最多只能同时满足其中两项。一致性又分为强一致性和最终一致性
 BASE理论：基本可用（basically available）、软状态（SOFT STATE）、最终一
          致性（eventually consistient）是对CAP中可用性和一致性权衡的结果，
		  其核心是即使无法做到强一致性，
        也可以根据业务和场景做到最终一致性
		
事务一致性协议：2pc 3pc
 2pc（two phase commite）：大部分关系性数据库都采用的2pc协议
  1阶段：提交事务请求
  2阶段：执行事务请求
  缺点：同步阻塞，参与者都得等待其他参与者的相应。单点，协调者单点。数据不一致，
		部分参与者收到协调者的commit请求，而部分没有收到。太过保守，一个参与者不成功，都不成功。
 3pc：在2pc的基础上增加了预提交
 
 解决2pc和3pc的缺点：paxos算法理论。
 
 paxos算法工程实践;chubby分布式锁服务
